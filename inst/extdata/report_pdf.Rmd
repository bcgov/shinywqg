---
title: "Water Quality Guideline Report"
output: pdf_document
params:
  use: NA
  table: NA
  cvalues: NA
---
```{r global_options, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      warning = FALSE, message = FALSE,
                      include = FALSE)

library(dplyr)
library(gt)
```

```{r} 
cvalues <- paste0(names(params$cvalues), ': ', params$cvalues, collapse = "<br>") 
```
 
```{r, include = TRUE}
params$table %>%
  group_by(Variable) %>% 
  gt::gt(rowname_col = "Term") %>%
   tab_header(
    title = params$use,
    subtitle = gt::html(cvalues)
  ) %>%
  gt::fmt_missing(columns = gt::everything()) %>%
  gt::cols_align(
    align = "center",
    columns = gt::everything()
  ) %>%
  gt::tab_style(
    style = gt::cell_text(size = gt::px(13)),
    locations = list(
      gt::cells_data(
      columns = gt::vars(Guideline, Equation, Reference)),
      gt::cells_stub(rows = TRUE)
    )
  ) %>%
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_group(
      groups = TRUE
    )
  ) %>%
  gt::tab_footnote(
    "Canada 2014 <this is incomplete>",
    locations = gt::cells_data(
      columns = gt::vars(Reference),
      rows = Reference == "CANADA_2014"
    )
  ) %>%
  gt::tab_footnote(
    "British Columbia 2015 <this is incomplete>",
    locations = gt::cells_data(
      columns = gt::vars(Reference),
      rows = Reference == "BC_2015"
    )
  ) %>%
  gt::tab_options(footnotes.font.size = gt::px(11),
              table.width  = gt::px(600),
              row_group.padding = gt::px(15),  heading.title.font.size = gt::px(18),
              heading.title.font.weight = "bold")
```

